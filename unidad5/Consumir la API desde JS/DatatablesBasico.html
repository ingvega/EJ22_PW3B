<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi primer ejercicio con datatables</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/rowgroup/1.1.4/css/rowGroup.dataTables.min.css">
</head>
<body>
    <table id="tblTopEmpleados"></table>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="http://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/rowgroup/1.1.4/js/dataTables.rowGroup.min.js"></script>
    <script>
        $(document).ready( function () {
            
            fetch("https://localhost:44386/api/Employees/Top5BySales")
                .then(response => response.json())
                .then(data => {
                    cargarTabla(data);
                })
                .catch(error => console.error('Unable to get items.', error));
        });

        function cargarTabla(empleados){
            $('#tblTopEmpleados').DataTable(
                {
                    data: empleados,
                    columns: [
                        { title: 'Empleado', data: 'empleado' },
                        { title: 'Total de unidades vendidas', 
                        data: 'ventasTotales',
                        render: DataTable.render.number(',','.',0) }
                    ],
                    order:[[1,'desc'],[0,'asc']]
                    
                } );
        }
    </script>
</body>
</html>